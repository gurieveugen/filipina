<?php
//Error reporting
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_COMPILE_ERROR);

//Define constants
define('SITE_URL', home_url());
define('AJAX_URL', admin_url('admin-ajax.php'));
define('THEME_PATH', get_template_directory().'/');
define('THEME_URI', get_template_directory_uri().'/');
define('CHILD_URI', get_stylesheet_directory_uri().'/');
define('THEMEX_PATH', THEME_PATH.'framework/');
define('THEMEX_URI', THEME_URI.'framework/');
define('THEMEX_PREFIX', 'themex_');

//Set content width
$content_width=940;

//Load language files
load_theme_textdomain('lovestory', THEME_PATH.'languages');

//Include theme functions
include(THEMEX_PATH.'functions.php');

//Include configuration
include(THEMEX_PATH.'config.php');

//Include core class
include(THEMEX_PATH.'classes/themex.core.php');

//Create theme instance
$themex=new ThemexCore($config);

// ==============================================================
// Require
// ==============================================================
require_once 'includes/Notifications.php';
require_once 'includes/Messages.php';
require_once 'includes/MessageHTML.php';
require_once 'includes/__.php';

// ==============================================================
// Control Collections
// ==============================================================
$cc_global = new \Controls\ControlsCollection(
	array(
		new \Controls\Text(
			'Messages per page',
			array(
				'default-value' => '10',
				'description' => 'Count messages per page'
			)
		),
		new \Controls\Textarea(
			'Fake Users',
			array(
				'default-value' => '316326,313468,308616,319030,314298,310575,309753,307178,318270,313083,316325,309340,307210,316405,313628,313749,318414,307289,312968,314055,311801,308949,309626,311275,314982,316199,313532,318415,315023,314021,314043,311651,310635,308638,309155,310925,308808,312266,311510,309446,308119,306783,310835,319135,311978,309807,312806,307163,311485,318692,308961,314892,308585,314536,312744,316836,317126,319227,313484,313834,310692,315701,312616,309993,308463,314539,314332,313406,314194,306999,312447,309380,311592,315468,312984,306406,307437,307629,312845,311792,318223,315027,307402,308527,318811,314896,318626,311010,315344,311889,313362,307114,310000,311354,310806,307431,314889,310042,309659,314924,308149,307104,319399,313622,315179,318849,313490,308182,315024,318527,313692,306995,311142,315407,316068,308980,319345,316906,315189,312482,313768,318870,318815,313386,306489,310414,313510,314473,309320,314307,314370,309354,314944,317008,314986,316878,308544,309610,310748,312296,306903,311131,308116,310118,311727,314861,319009,315512,307063,309838,311893,311795,316163,316734,315476,316322,309913,315787,316340,307817,307250,311155,314884,319226,308846,310848,313400,307099,309847,308189,308893,314915,311076,318791,311938,310236,315007,312271,309284,318859,311615,316855,316444,309408,313804,310401,311276,310081,313907,315017,313354,311994,310102,307231,311831,315928,313412,313111,318477,319243,318251,318256,311272,318306,316366,308032,315582,309768,313890,306553,308973,313258,311733,311874,311117,311325,319207,313209,308556,313527,317002,313673,309758,314727,318259,314662,307789,309892,315291,309606,311431,313679,312995,308744,313483,312713,309965,309464,314214,318700,319408,306473,319260,316728,309252,318699,319053,314276,308364,307220,312489,313578,310573,312817,308123,309440,310484,313746,319040,314293,307990,313364,309015,314095,311064,316545,311682,313866,313738,316208,311921,312419,312211,308894,313729,307300,313012,311239,316309,310458,313050,318828,311006,319173,312996,313451,310192,306919,319083,308477,319485,308332,307648,316450,314335,312898,307778,312360,314224,307717,319477,309999,313197,309035,315477,313410,317138,316905,314697,313695,314195,319157,309941,314813,308898,312956,307681,312299,313660,316025,307897,319332,309002,309735,315556,318324,312620,306775,310156,313788,319397,311566,310724,318918,308701,314281,308606,309152,310966,312884,315428,307485,312865,306665,313533,307931,318427,314231,308479,314286,308848,316119,315809,315465,306958,313650,318622,312656,319389,307371,318220,308421,313877,308593,319015,312913,313202,309817,306912,311498,310141,314501,307775,312293,309820,312050,309174,310569,309389,314356,314973,310409,319267,307215,312538,312173,312042,316817,313323,311734,308504,311134,312280,318467,313732,313355,308278,307719,308812,315919,314049,308903,311464,311486,319304,308031,308160,316722,315412,314470,312632,313752,315807,312607,316492,306616,317151,318913,311784,317098,314319,310772,313045,316559,311059,310027,316455,310159,311020,309673,307176,310170,307316,318444,312868,309233,315570,312421,312980,315684,308058,306475,309880,308965,313245,312454,312418,306556,315712,314056,317050,315413,309481,308871,308817,316052,313495,315279,306542,307845,311826,313269,310470,308845,309109,309600,319002,314251,314203,308781,314415,314928,314849,313133,309535,308303,307425,318736,310222,318363,314378,318788,316979,309691,318915,315648,310900,314464,315907,313325,310377,315439,308932,318629,311456,315113,312283,316877,306756,311864,313272,318257,314535,314882,314699,312184,316792,313118,315820,313449,307993,314507,313748,310746,319466,307833,314895,306792,313655,312390,306548,306928,309126,312425,318875,314156,308710,311611,307699,314457,309943,313621,315136,316603,312258,318673,314702,312060,308872,310773,309321,312785,318800,316899,316316,306976,308289,306411,316367,308409,316647,316343,309798,312402,311909,318301,310849,306423,307920,319297,318285,311767,307495,315925,307535,306988,308840,307142,310253,311810,308601,313917,312730,313620,316242,318578,316030,313237,309625,313822,311579,310708,309988,313563,315409,311192,310256,309289,316604,314730,314766,315386,313531,319067,314890,308337,314026,312685,311949,314679,317058,317013,314596,313530,316987,311405,313276,310712,314133,318479,308551,314140,316306,319152,319024,316970,315867,309285,308151,308402,309938,319104,306800,313159,315467,314791,314993,312972,311291,310512,307379,314175,314562,311092,312494,310402,318714,309821,312502,316569,318196,311337,308647,315188,315530,310445,308787,307277,307940,308095,312919,316812,318234,310239,316562,315998,307160,318782,310540,319315,318349,312820,310730,315510,307119,316109,316248,312435,319383,316015,311965,315955,315769,312811,310343,315558,308326,316505,309555,310368,314894,315596,306930,309231,314629,307224,313579,313055,310332,309688,318476,310874,312875,319484,318292,308423,313833,309068,316985,315383,306989,312637,307337,307109,311039,311484,306490,313110,310049,313091,318262,309601,318775,307456,309521,306454,313821,315824,311099,309996,318618,312145,307645,315721,311718,313186,319376,313173,313219,310717,311546,310148,311875,316666,308193,306778,316291,315433,313784,311141,306538,312900,311144,315088,306558,310665,314369,309843,319271,312180,318267,310593,314143,316588,311166,315950,308185,306617,316694,311749,315495,310768,313765,307994,316432,315250,309207,307876,316658,319126,311362,311570,310385,318897,310123,306916,311562,318704,308397,309525,314164,311411,315098,310655,318226,314244,312332,309137,313653,307916,309536,307568,309404,310612,314936,307884,311905,308458,319043,314315,306893,314245,314804,307523,314443,315661,316529,309010,311540,316960,306849,318305,314974,313408,318225,307658,311116,306546,306415,310174,311074,308570,311912,314820,311750,306857,316626,308023,315485,314165,311908,309930,312873,312439,309856,307999,312041,308218,306673,306956,315921,312261,311288,313515,306803,311171,308252,315426,317099,311310,308652,312779,310439,314069,312761,314808,318920,315382,318666,306446,307871,314715,315562,309869,310700,319352,310619,315868,314221,307601,313072,310834,309045,309766,311333,316796,307960,307671,309314,311124,315360,310972,319446,313132,310188,312671,318407,318538,318844,316468,315139,313299,316594,311326,313378,309309,315892,319234,313033,316345,315864,312485,319193,314478,316270,309308,315817,318360,310527,307113,318378,314512,319121,311219,311070,307314,315458,313736,308291,319289,309806,310939,312932,315930,313267,313361,315640,319423,318451,313281,316655,308622,318322,311968,307979,309584,309635,314899,316128,309853,314176,310403,308305,310037,307983,308216,316795,311352,316863,315589,308506,319033,306879,313491,310926,314654,307053,319279,314704,307219,312512,309100,307143,307392,314344,311391,308005,314631,307305,307130,308755,310539,318732,306925,311087,315668,318940,309372,318721,311418,313389,318996,306933,312834,308690,309104,308367,311115,307308,309008,316815,308253,311948,314289,319070,318654,311576,310846,311051,315430,310854,316442,317120,306929,316773,319402,308426,314153,312459,315148,308887,313561,311641,313607,314454,319036,309290,307959,309500,314779,318837,310686,318331,313174,313516,306828,308592,318440,312403,311041,311052,319294,311032,319005,311048,316914,306647,318660,307069,310093,316373,310430,309096,312649,306567,313218,309260,316411,312411,309619,309583,311146,308799,315357,311462,312773,316556,318911,318529,311016,311001,316908,314122,307410,312717,312116,315669,310350,309804,312135,315274,308067,310647,314725,311317,316427,313928,315565,315456,307494,318752,315798,310646,319167,309830,313099,307852,319041,309973,312690,315215,309039,315396,308958,315461,315601,316240,316096,307384,314776,314919,311084,312682,315260,318513,307682,310264,314495,316931,313721,312758,309365,314130,313481,318896,309744,312393,311601,308401,309974,307094,309773,308995,312648,308466,308739,313160,318463,317032,315614,315252,313442,306524,312721,311287,308806,309940,308442,319433,310675,309922,316701,309613,307679,313287,315848,307260,310121,306630,312436,310260,309964,318652,308644,308120,314471,308543,316716,315450,312895,306734,307443,310538,313568,307244,312345,310433,310991,314962,313166,311536,306455,310765,313596,310983,311515,315655,310652,314670,310728,306634,307385,313713,308885,317088,314577,316250,308359,312723,309564,315094,314988,310626,308052,314666,318488,306708,309000,310110,314299,312584,315322,308860,308684,308837,316774,319334,309968,310957,318703,308250,311147,313683,307585,308528,308815,310030,318763,312617,309728,313477,316721,311447,313920,316423,318213,311759,314259,315339,308180,319237,314151,314219,311478,315446,312181,311798,316259,307730,319441,306410,310201,314376,311554,318865,310352,312708,314799,310280,312417,307451,315310,319452,319101,318218,311677,311652,309276,318945,315992,307103,310880,312348,306521,312776,311746,312505,312966,316190,310390,313857,315743,313708,311271,314006,306486,313937,318951,314248,310252,313469,307690,316659,318283,318669,310202,306532,306462,313555,314380,308879,310073,311625,314421,309834,311745,309423,307995,307718,308408,306755,310083,312925,315083,307138,309492,306961,313360,315233,312639,308905,317115,313153,307539,319409,312081,307441,311338,313964,311308,307462,312189,309628,312833,311702,312151,308858,306815,307847,310905,314411,311614,308664,312219,319425,309784,314288,309435,310396,310273,310697,312309,311433,312313,309359,316846,309223,314534,311458,309241,308362,309839,313934,315470,309148,318553,312879,314123,317140,311063,309030,311477,316527,308048,311638,314115,314090,306540,307815,316327,309316,314734,309823,311397,311126,309544,307617,313031,317028,312897,314851,308955,310130,315348,312800,315738,311528,318401,306938,307420,316723,312533,311557,313528,313971,309508,310833,309281,313684,310211,307447,307283,319272,315119,307347,308804,308206,312188,319145,313680,307161,307873,306418,310601,313242,313366,312047,313150,310912,309746,313066,318434,313956,308229,310465,316140,313157,312351,315827,307934,312068,309261,312434,316425,308037,306953,308657,310394,308175,309896,309997,311846,313735,306686,318713,310875,314154,312699,308354,309904,316394,312202,308372,314516,316964,315356,315980,312062,310520,308357,311857,308667,318986,315845,306878,309267,316016,311917,308098,309468,313758,316753,315891,319306,319366,311243,313156,310146,315954,308390,306441,315239,306791,307001,309682,310505,319181,314951,313263,307882,312999,311708,315362,306763,313199,315890,314363,310489,312095,312799,312437,314399,312381,308930,309542,313061,309300,309028,312504,316671,314591,314280,310662,317069,306492,313333,315938,318772,307729,308413,314605,315625,308234,309196,310187,316211,308533,314898,318413,314237,310092,310475,312961,314678,311626,314120,316528,317174,314304,307369,313480,309188,315922,307323,314845,310872,312706,316303,311000,308147,306391,306907,310354,312846,307879,310452,311617,307594,315920,313154,314205,307840,307907,311446,306672,317148,309906,313685,315945,308369,316826,309986,315766,314976,312756,309307,310493,315695,310687,311678,318621,309724,312813,316360,309883,316380,315964,309406,315927,313208,316261,306891,312129,311285,310997,316639,310351,308249,314547,314810,306980,310815,311193,316026,316348,306942,309794,314651,309040,315196,313017,306407,306428,307084,309255,312469,311469,313020,314209,319211,308178,308772,311024,318514,306908,310672,311901,309702,318246,308630,307509,312751,313507,311959,311328,311088,315486,308794,310279,310422,310122,314918,307985,315232,310821,315168,307136,307943,309189,311322,314046,316546,314064,314640,312888,313188,315318,314744,309646,308376,310100,313619,307284,310235,312896,317105,310960,318530,316463,310896,315984,311240,310453,309954,306962,309819,309944,314698,312880,310245,311701,316162,311222,314198,311680,317020,309868,314803,310275,311047,307266,313171,317016,311633,313105,313427,318351,315823,306940,314599,311251,316362,306967,307393,316654,306735,308064,310283,312480,310975,311696,307211,314466,312872,314835,312346,306606,307488,307906,314972,318249,317201,308519,315767,314532,312220,315451,313739,315236,306513,310938,310466,312763,307236,312862,312537,309863,309242,310254,306939,313271,316350,313600,311120,315341,311135,315600,308139,313384,314933,313106,308108,311269,314749,308456,315425,306785,307396,314935,316433,309397,308459,312109,308396,316023,310596,307803,310293,311675,307259,307518,319045,314054,314141,318207,308734,307630,307312,311502,314685,319455,313518,314509,319233,314481,309875,316092,307212,312323,313025,313662,311196,308297,307003,314327,306396,315444,310544,313101,313473,316038,307547,316568,306757,307470,307627,310424,307152,316518,313158,314551,316402,315437,313401,308988,315317,316907,310065,306741,313041,313444,316800,312203,314794,316437,315266,312774,309428,306507,311859,310633,316580,318426,306819,310952,309801,311488,316156,312793,306574,311847,312049,318694,307706,306950,307904,313661,311083,311068,309747,316860,308876,313086,306656,309424,311816,307482,311137,307517,309918,310506,308443,313603,309386,309363,308387,313058,309432,308828,316077,311293,312883,311598,316298,307919,307505,314740,307924,309025,316407,309115,312788,311929,312628,318536,316012,313069,307297,306781,308100,313831,318411,311714,306839,310261,312503,309222,307693,310007,307740,314718,307599,309653,315200,307279,309298,307544,308541,316085,315626,306584,314879,317168,314781,307511,306514,308057,312766,312259,310731,310924,313375,306677,310471,309050,310812,312375,306889,313417,316245,310415,312217,314263,315036,315455,307989,315588,310907,319465,315498,316131,314789,312294,306390,306511,311971,317202,308224,315785,315452,308567,311812,308709,309893,307051,311717,317066,312359,308757,316424,307551,310500,312157,313681,314636,308383,313704,314947,313640,307881,308269,314235,312368,314241,314590,315171,315222,311886,307216,314024,309387,316871,309585,315777,310767,313797,310241,307899,309797,307903,311347,316268,308842,313049,306888,315497,315775,306400,318549,316729,316168,307352,313359,313571,307453,310582,313345,308261,316100,313867,311491,308514,308448,314648,314142,312343,316500,308620,315944,310600,306639,306445,317041,315365,306661,310898,309477,309978,309101,313127,312196,315913,310503,315327,311086,315768,309796,308777,306651,312170,306998,311483,315764,318390,315205,311853,307269,317175,312585,313318,313311,307052,311765,312105,312958,308800,312814,315395,308344,312809,314023,313966,311634,312545,314145,314208,309325,311038,311660,307902,310372,309761,316083,318963,315561,316408,309870,313611,318197,306900,311720,310278,314639,307137,314424,306667,310685,307560,312183,314646,313413,319266,313841,306966,316076',
				'description' => 'You need type user ids separated by commas. Like this: 1,2,3,4'
			)
		)
	)
);

// ==============================================================
// Sections
// ==============================================================
$s_global = new \Admin\Section(
	'Global settigns',
	array(
		'prefix' => 'gs_',
		'tab_icon' => 'fa-cog'
	),
	$cc_global
);

// ==============================================================
// Pages
// ==============================================================
$p_settings = new \Admin\Page(
	'Theme settings',
	array(
		'icon_code' => '',
		'parent_page' => 'options-general.php',
	),
	array($s_global)
);

// ==============================================================
// Actions
// ==============================================================
add_action('wp_enqueue_scripts', 'scriptsAndStyles');

/**
 * Add some scripts and styles
 */
function scriptsAndStyles()
{
	wp_enqueue_style( 'all-messages', get_template_directory_uri().'/css/all_messages.css' );
}